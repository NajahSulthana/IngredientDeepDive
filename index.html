<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root{ --bg:#fffaf0; --card:#f9f1e7; --accent:#d2a679; --dark:#8b5e3c; }
    *{box-sizing:border-box}
    body {
      background-color: var(--bg);
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      padding: 16px;
    }
    .login-box {
      background: var(--card);
      padding: 22px;
      border: 1px solid var(--accent);
      border-radius: 10px;
      width: 100%;
      max-width: 360px;
      box-shadow: 0 6px 18px rgba(139,94,60,0.08);
    }
    h1 {
      text-align: center;
      color: var(--dark);
      margin: 0 0 14px 0;
      font-size: 1.4rem;
    }
    label{display:block;margin:8px 0 4px 0;font-size:0.95rem}
    input[type="text"], input[type="password"], input[type="email"]{
      width:100%;padding:8px;border:1px solid #cfcfcf;border-radius:6px;font-size:0.95rem
    }
    .row{display:flex;gap:8px;align-items:center}
    .buttons{display:flex;gap:8px;margin-top:12px}
    button, input[type="submit"], input[type="reset"]{
      background:var(--accent);color:#fff;border:none;padding:8px 10px;border-radius:6px;cursor:pointer;font-weight:600
    }
    button.secondary{background:#fff;border:1px solid #dcdcdc;color:var(--dark)}
    .small{font-size:0.85rem;color:#444;margin-top:8px}
    .register-link{ text-align:center;margin-top:12px }
    .register-link a{color:var(--dark);text-decoration:none;font-weight:600}
    .controls{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
    .remember{display:flex;align-items:center;gap:6px}
    meter{width:100%;height:10px}
    .error{color:#b33;margin-top:8px;font-size:0.9rem;display:none}
    @media (max-width:420px){.login-box{padding:16px}}
  </style>
</head>
<body>
  <div class="login-box" role="main" aria-labelledby="loginHeading">
    <form id="loginForm" action="IDD_main.html" method="get" novalidate>
      <h1 id="loginHeading">Login</h1>

      <label for="username">Username</label>
      <input type="text" id="username" name="username" autocomplete="username" required autofocus>

      <label for="password">Password</label>
      <div class="row">
        <input type="password" id="password" name="password" autocomplete="current-password" required aria-describedby="pwHelp">
        <button type="button" id="togglePw" class="secondary" aria-pressed="false" title="Show or hide password">Show</button>
      </div>

      <div id="pwHelp" class="small">Use at least 8 characters. Password strength:</div>
      <meter id="pwStrength" min="0" max="4" low="1" high="3" optimum="4" value="0"></meter>

      <div class="controls">
        <label class="remember"><input type="checkbox" id="rememberMe"> Remember me</label>
        <button type="button" id="resetBtn" class="secondary">Reset</button>
      </div>

      <div class="buttons">
        <input type="submit" value="Login">
      </div>

      <div class="error" id="errorMsg" role="alert"></div>

      <div class="register-link">
        Don't have an account? <a href="IDD signin.html">Create one</a>
      </div>
    </form>
  </div>

  <script>
    // Elements
    const form = document.getElementById('loginForm');
    const username = document.getElementById('username');
    const password = document.getElementById('password');
    const togglePw = document.getElementById('togglePw');
    const remember = document.getElementById('rememberMe');
    const pwStrength = document.getElementById('pwStrength');
    const errorMsg = document.getElementById('errorMsg');
    const resetBtn = document.getElementById('resetBtn');

    // Load remembered username
    try{
      const saved = localStorage.getItem('idd_username');
      if(saved){ username.value = saved; remember.checked = true; }
    }catch(e){ /* localStorage may be disabled */ }

    // Password strength (simple heuristic)
    function calcStrength(pw){
      let score = 0;
      if(!pw) return 0;
      if(pw.length >= 8) score++;
      if(/[a-z]/.test(pw) && /[A-Z]/.test(pw)) score++;
      if(/[0-9]/.test(pw)) score++;
      if(/[^A-Za-z0-9]/.test(pw)) score++;
      return score;
    }

    password.addEventListener('input', () => {
      const s = calcStrength(password.value);
      pwStrength.value = s;
      // colour feedback via aria-label for screen readers
      pwStrength.setAttribute('aria-label', 'Password strength ' + s + ' of 4');
    });

    // Toggle password visibility
    togglePw.addEventListener('click', () => {
      const isHidden = password.type === 'password';
      password.type = isHidden ? 'text' : 'password';
      togglePw.textContent = isHidden ? 'Hide' : 'Show';
      togglePw.setAttribute('aria-pressed', String(isHidden));
    });

    // Reset button behaviour
    resetBtn.addEventListener('click', () => {
      form.reset();
      pwStrength.value = 0;
      errorMsg.style.display = 'none';
      try{ localStorage.removeItem('idd_username'); }catch(e){}
    });

    // Form submit with client-side validation and simulated login
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      errorMsg.style.display = 'none';
      const u = username.value.trim();
      const p = password.value;
      if(!u || !p){
        showError('Please enter both username and password.');
        return;
      }
      if(p.length < 6){
        showError('Password must be at least 6 characters.');
        return;
      }

      // Remember username if requested
      try{
        if(remember.checked) localStorage.setItem('idd_username', u);
        else localStorage.removeItem('idd_username');
      }catch(e){ }

      // Visual success and then follow original action
      // (simulate a login request)
      showSuccess('Logging inâ€¦');
      setTimeout(() => {
        // proceed to target page (keeps original behavior)
        window.location.href = form.action;
      }, 900);
    });

    function showError(msg){
      errorMsg.textContent = msg;
      errorMsg.style.display = 'block';
      errorMsg.style.color = '#b33';
    }

    function showSuccess(msg){
      errorMsg.textContent = msg;
      errorMsg.style.display = 'block';
      errorMsg.style.color = 'green';
    }
  </script>
</body>
</html>

